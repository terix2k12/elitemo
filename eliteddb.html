<!DOCTYPE html>
<html>
 <head>
 	<title>Elite:Dangerous - Mission Optimizer</title>
 </head>
 <body>
 	<h1>Elite:Dangerous - Mission Optimizer</h1>

<div id="jswarning">Your browsers needs to allow javascript for this page.</div>

<input type="file" id="files" name="files[]" multiple />
<output id="list"></output>

<button onclick="myFunction()">Click me</button>
<div id="demo">foo</div>

<output id="contents"></output>

 	<script>

    var jswarning = document.getElementById("jswarning");
    jswarning.innerHTML = "JS active :) !";

// CORS is prohibiting access to external APIs
 // http://localhost:8000/
 // python â€“m SimpleHTTPServer

 function myFunction() {
 	var xhttp = new XMLHttpRequest();
 	xhttp.onreadystatechange = function() {
    // if (this.readyState == 4 && this.status == 200) {
     document.getElementById("demo").innerHTML = "Hello" + this.status + this.responseText;
    // }
  	};
  	xhttp.open("GET", "http://localhost:8000/commodities");
  	xhttp.send();
} 


// get most recent from https://eddb.io/archive/v6/stations.json

// infos about FileReader https://www.html5rocks.com/en/tutorials/file/dndfiles/


 document.getElementById('files').addEventListener('change', handleFileSelect, false);


function testApi() {
	// Check for the various File API support.
	if (!(window.File && window.FileReader && window.FileList && window.Blob)) {
  	alert('The File APIs are not fully supported in this browser.');
	} 
}

// Great success! All the File APIs are supported.


 
  function handleFileSelect(evt) {
  

    var files = evt.target.files; // FileList object

    // files is a FileList of File objects. List some properties.
    var output = [];
    for (var i = 0, f; f = files[i]; i++) {
      output.push('<li><strong>', escape(f.name), '</strong> (', f.type || 'n/a', ') - ',
                  f.size, ' bytes, last modified: ',
                  f.lastModifiedDate ? f.lastModifiedDate.toLocaleDateString() : 'n/a',
                  '</li>');
 

	var reader = new FileReader();
    reader.onload = function() {
 	     
 		var output = [];
 	 
       var jsonArray = JSON.parse(reader.result);

        var firstElem = jsonArray[0];
        output.push(firstElem.id);
       for( x in jsonArray) {
       	output.push( jsonArray[x].name );
  
         }

			document.getElementById('contents').innerHTML = output.join('');
       	};

 	reader.readAsText(f);

 }
    

    document.getElementById('list').innerHTML = '<ul>' + output.join(' # ') + '</ul>';
  }




</script>
 <div id="imprint">&copy; 2019</div>
 </body>
</html>